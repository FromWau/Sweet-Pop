.tabbrowser-tab {
    height: var(--tab-min-height) !important;
}

/* Disables Tab-line and label*/
.tabbrowser-tab .tab-line, .tab-secondary-label {
    display: none !important;
}

/* Fix for hover on selected tab */
.tabbrowser-tab[visuallyselected] .tab-content:hover {
    border-radius: var(--tab-radius) var(--tab-radius) 0 0 !important;
}

#TabsToolbar-customization-target > #tabbrowser-tabs[positionpinnedtabs] > #tabbrowser-arrowscrollbox > .tabbrowser-tab[pinned] {
    margin-inline-start: 0 !important;
    position: relative !important;
    display: inline-grid !important;
}

#tabbrowser-tabs[positionpinnedtabs] > #tabbrowser-arrowscrollbox::part(scrollbox) {
  padding-inline-end: var(--tab-shadow-max-size) !important;
}
#scrollbutton-down, #scrollbutton-up {
    display: none !important;
}
#tabbrowser-tabs[haspinnedtabs] {
    padding-inline-start: 0 !important;
    overflow: hidden !important;
}

#tabbrowser-arrowscrollbox[scrolledtostart="true"]::part(scrollbutton-up),
#tabbrowser-arrowscrollbox[scrolledtoend="true"]::part(scrollbutton-down) {
    display: none !important;
}

#tabbrowser-tabs[haspinnedtabs]:not([positionpinnedtabs]) > #tabbrowser-arrowscrollbox > .tabbrowser-tab[first-visible-unpinned-tab] {
    margin-inline-start: 0 !important;
}

/* Fix tab background height */
.tab-background {
    margin-block: 0 !important;
    border-radius: var(--tab-radius) var(--tab-radius) 0 0 !important;
}

.tab-background, .tab-stack {
    min-height: 0 !important;
}

/* Rounded right/left corners on tabs adjacent to selected tabs */
.tabbrowser-tab[beforeselected-visible] {
    border-radius: 0 0 var(--tab-radius) 0 !important;
}

.tabbrowser-tab[visuallyselected] + .tabbrowser-tab {
    border-radius: 0 0 0 var(--tab-radius) !important;
}

/* Transparent background on selected tab */
.tabbrowser-tab[visuallyselected] .tab-background {
    background: transparent !important;
    visibility: visible !important;
}
#TabsToolbar:not([brighttext]) #tabbrowser-tabs:not([noshadowfortests]) .tabbrowser-tab:is([visuallyselected="true"], [multiselected]) > .tab-stack > .tab-background,
#tabbrowser-tabs:not([noshadowfortests]) .tab-background:is([selected], [multiselected]) {
    box-shadow: none !important;
}

.tabbrowser-tab:hover .tab-background {
    background: transparent !important;
}

/* different background on multiselectrd tabs */
.tabbrowser-tab[multiselected]:not([selected]) .tab-background {
    background: color-mix(in srgb, currentColor 11%, transparent) !important;
}

.tabbrowser-tab[visuallyselected] {
    border: 2px solid transparent !important;
    /* Border top radius*/
    border-radius: var(--tab-radius) var(--tab-radius) 0 0 !important;
    border-bottom: 2px solid var(--back-color1) !important;
    box-shadow: 0 -10001px 0 9999px var(--back-color1) !important;
    background: var(--back-color1) !important;
    background-clip: padding-box !important;
}

/* Border bottom radius */
.tabbrowser-tab[visuallyselected] .tab-background::before,
.tabbrowser-tab[visuallyselected] .tab-background::after {
    content: '' !important;
    display: block !important;
    position: absolute !important;
    width: var(--tab-radius) !important;
    height: var(--tab-radius) !important;
    bottom: -3px !important;
    pointer-events: none !important;
    border-bottom: 2px solid transparent !important;
    clip-path: inset(0) !important;
}

.tabbrowser-tab[visuallyselected] .tab-background::before {
    border-bottom-right-radius: var(--tab-radius) !important;
    left: 0 !important;
    transform: translateX(calc(-3px - var(--tab-radius))) !important;
    border-right: 2px solid transparent !important;
    box-shadow: 4px 4px 0 4px var(--back-color1) !important;
}

.tabbrowser-tab[visuallyselected] .tab-background::after {
    border-bottom-left-radius: var(--tab-radius) !important;
    right: 0 !important;
    transform: translateX(calc(3px + var(--tab-radius))) !important;
    border-left: 2px solid transparent !important;
    box-shadow: -4px 4px 0 4px var(--back-color1) !important;
}

.tabbrowser-tab:not([visuallyselected]) {
    z-index: 3 !important;
}

/* Moving First and last tab in if there isn't any pinned tab*/
#tabbrowser-tabs:not([positionpinnedtabs]) .tabbrowser-tab[first-visible-tab] {
  margin-left: var(--tab-radius) !important;
}

#tabbrowser-tabs:not([positionpinnedtabs]) .tabbrowser-tab[last-visible-tab] {
  margin-right: var(--tab-radius) !important;
}

/* The animation in the toolbox*/
#navigator-toolbox:before {
    content: "";
    position: absolute !important;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--tabbar-gradient-color);
    background-size: 100% !important;
    background-repeat: no-repeat !important;
    background-position: left bottom !important;
}

#navigator-toolbox:after {
    content: "";
    position: absolute !important;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--tabbar-gradient-color);
    background-size: 100% 2px !important;
    background-repeat: no-repeat !important;
    background-position: left bottom !important;
    z-index: 1 !important;
}

#navigator-toolbox {
    border-bottom: 0px !important;
}

/* Glowing tab favicon */
.tab-icon-image[selected="true"] {
    filter: drop-shadow(0 0 5px var(--text-color1))
}

/* Make hovered tab icon, tab label normal */
.tabbrowser-tab:not(:hover):not([selected]) .tab-icon-image, .tabbrowser-tab:not(:hover):not([selected]) .tab-label {
    filter: brightness(0.5) !important;
}

/* Close Button, Mute/Sound Button show on Hover */
.tabbrowser-tab:not([pinned]):not(:hover) .tab-close-button, .tabbrowser-tab:not([pinned]):not(:hover) .tab-icon-sound {
    visibility: collapse !important;
}

/* Remove Tab Seperatorb */
.tabbrowser-tab::before, .tabbrowser-tab::after {
    display: none !important;
}

/* Pending Tab Italic Style */
.tabbrowser-tab[pending] {
    font-style: italic !important;
}

/* Tab Close button*/
.tab-close-button {
    width: 20px !important;
    height: 20px !important;
    padding: 4px !important;
}

.tab-icon-pending:not([pinned]) {
    list-style-image: url("../icons/tab-loading.png") !important;
}

.tab-throbber:not([pinned]) {
    list-style-image: url("../icons/tab-loading.png") !important;
}

#TabsToolbar #BMB_bookmarksPopup {
    margin-top: -7px !important;
}
#tabs-newtab-button > .toolbarbutton-icon, #TabsToolbar #new-tab-button {
    background: var(--back-color1) !important;
    position: relative !important;
    padding: 0px !important;
}
#tabs-newtab-button > .toolbarbutton-icon, #TabsToolbar #new-tab-button > .toolbarbutton-icon {
    padding: 6px !important;
}
